Now we have two major approaches of decision making process: preference relations in Section \ref{chap1:sec1} and choice rules in Section \ref{chap1:sec2},
what we need to do is to link them. This linkage will emerge when we examine two central assumptions: \textbf{rationality} and \textbf{WARP}. So the major question here is: 
$$\textbf{rational}\succsim\xLeftrightarrow{???} (\mathcal{B},C(\cdot))\textbf{ satisfies WARP}$$
And the answer is: \textit{YES!} but not exactly. Now let's dig in.

\subsection*{Rational $\succsim\Rightarrow(\mathcal{B},C(\cdot))$ satisfies WARP}

First, $\textbf{rational}\succsim \Rightarrow (\mathcal{B},C(\cdot))\textbf{ satisfies WARP}$ is a big YES. To prove this, we need to define \textit{induced choice correspondence}:
\begin{definition}\label{def_induced_choice}
    Given a \textbf{rational} $\succsim$ on $X$, if the decision maker faces a nonempty subset of alternatives $B\subset X$, by maximizing her preference, she would choose any one of the elements in the 
    \textit{induced choice correspondence}: $C^*(B,\succsim)=\{x\in B:x\succsim y, \forall y\in B\}$
\end{definition}

The induced choice correspondence $C^*(B,\succsim)$ has an important property: 
\begin{theorem}
    if $X$ is finite, $C^*(B,\succsim)$ will be \textbf{nonempty}.
\end{theorem}

A brief proof of this proposition is: If $X$ is finite, $B$ is finite as well. We will prove by induction. Starting from $|B|=1$, the only element of $B$ is in $C^*(B,\succsim)$. Now suppose $C^*(B,\succsim)$ is nonempty when $|B_n|=n$, 
let $x^*\in C^*(B_n,\succsim)$; when $|B_{n+1}|=n+1$, let the $n+1$th element $y$ $(\{y\}=B_{n+1}\setminus B_n)$. By the completeness of a rational $\succsim$, either $y\succsim x^*$ or $x^*\succsim y$:
\begin{enumerate}
    \item[i.] $y\succsim x^*$: since $x^*\in C^*(B_n,\succsim)\Rightarrow x^*\succsim x, \forall x\in B_n$. By transitivity of $\succsim$, $y\succsim x,\forall\in B_n$. By completeness, $y\succsim y$ as well. Hence, $y\in C^*(B_{n+1},\succsim)$.
    \item[ii.] $x^*\succsim y$: since $x^*\in C^*(B_n,\succsim)\Rightarrow x^*\succsim x, \forall x\in B_n$, hence $x^*\succsim x, \forall x\in B_n\cup{y}\Rightarrow x^*\in C^*(B_{n+1},\succsim)$
\end{enumerate}

Notice that when $B$ is finite, a stronger condition of $\succsim$ being acyclic and complete is equilavent to an induced choice rule $C^*(B,\succsim)\neq \varnothing$: 
\begin{theorem}\label{theo_acyclic_choice}
    For a finite $B$, $\succsim$ is complete and \textbf{acyclic} $\Leftrightarrow C^*(B,\succsim)\neq \varnothing$
\end{theorem}
$\succsim$ is acyclic mean that: $b_1\succsim b_2,b_2\succsim b_3,\cdots, b_{n-1}\succsim b_n\Rightarrow b_n\not\succsim b_1$. An example of transitive but not \textit{acyclic} relations is indifference $\sim$: $a_1\sim a_2\sim \cdots\sim a_n\Rightarrow a_n\sim a_1$.
A brief proof of Theorem \ref{theo_acyclic_choice} is:
\begin{enumerate}
    \item[i.] acyclic $\succsim\Rightarrow C^*(B,\succsim)\neq\varnothing$: Suppose if $C^*(B,\succsim)=\varnothing$, for $b_1\in B$, $b_1\notin C^*(B,\succsim)\Rightarrow \exists b_2$ s.t. $b_2\succsim b_1$. Continue this process, we can generate a sequence of $\cdots\succsim b_2\succsim b_1$, since $B$ is finite, this sequence must end at $b_n$. If $\succsim$ is acyclic, $b_1\not\succsim b_n$, this gives $b_n\succ b_1$, which would mean $b_n$ must be in $C^*(B,\succsim)$, contradicting.
    \item[ii.] $C^*(B,\succsim)\neq\varnothing\Rightarrow$ acyclic $\succsim$: Suppose $\succsim$ is not acyclic, then there exists $b_1\succsim b_2\succsim \cdots\succsim b_n\succsim b_1$, then for set $B=\{b_1,b_2,\cdots,b_n\}$, $\nexists b^*$ s.t. $b^*\succsim b_i \forall b_i\in B$, i.e., $C^*(B,\succsim)=\varnothing$.
\end{enumerate}

Of course, we want to extend this to the situation where $B$ is infinite. However, in general, it is possible that $C^*(B,\succsim)$ is empty (if you set the most preferred side of $B$ open, it would be impossible to choose based on the preferences).

With induced choice correspondence $C^*(B,\succsim)$ defined and non-emptyness proved, we can then say:
\begin{theorem}\label{thm_rational_leadto_WARP}
    If $\succsim$ is a rational preference relation, then the choice structure generated by $\succsim$, $(\mathcal{B},C^*(\cdot,\succsim))$, satisfies WARP
\end{theorem}

We can prove this theorem quite easily: $\forall B,B'$ suppose we have $x,y\in B\cap B'$ and $x\in C^*(B,\succsim),y\in C^*(B',\succsim)$, then $x\succsim a, \forall a\in B$ and $y\succsim b,\forall b\in B'$. Naturally, we have $x\succsim y$ since $y\in B$. By rationality (transitivity) of $\succsim$, we have $x\succsim y\succsim b,\forall b\in B'$, which means $x\in C^*(B',\succsim)$. This is precisely the definition of WARP

\subsection*{$(\mathcal{B},C(\cdot))$ satisfies WARP $\Rightarrow$ Rational $\succsim$}
The proof of this direction is more subtle, and is NOT necessarily a yes. Again, we start from a auxilary definition:
\begin{definition}\label{def_rationalize_choice}
    For a choice structure $(\mathcal{B},C(\cdot))$, a rational preference relation $\succsim$ \textbf{rationalizes} $C(\cdot)$ relative to $\mathcal{B}$ if $C(B)=C^*(B,\succsim), \forall B\in\mathcal{B}$.
\end{definition}

In words, if for all budget sets $B\in\mathcal{B}$, the choices generated by a rational $\succsim$, is just the choice rule $C(\cdot)$, $C(\cdot)$ is rationalized by $\succsim$. This is, in a sense, constructing an explanation of decision making behavior with preferences.

We already proved that $C^*(B,\succsim)$ satisfies WARP, which means that if a rationalizing preference relation to exist, WARP must be satisfied. However, if WARP is satisfied, a rationalizing preference relation does \textbf{NOT} necessarily exist.\footnote{A simple example is: $X=\{x,y,z\},\mathcal{B}=\{\{x,y\},\{y,z\},\{x,z\}\}$. Since $\mathcal{B}$ contains 3 binary menus, the choice structure $C(\{x,y\})=\{x\},C(\{y,z\})=\{y\},C(\{x,z\})=\{z\}$ vacuously satisfy WARP. But, this choice structure cannot be rationalized since it contradicts transitivity.}
Intuitiviely, more budget sets $B\in\mathcal{B}$ would mean that, to satisfy WARP, choice behavior would be restricted more, and it is easier to be self-contradicting. Therefore, to pin down a rational preference relation to rationalize $C(\cdot)$ relative to $\mathcal{B}$, we need to put some \textbf{restrictions on $\mathcal{B}$}.

\begin{theorem}\label{theorem_rationalizing_exist}
    If $(\mathcal{B},C(\cdot))$ is a choice structure that:
    \begin{enumerate}
        \item[i.] WARP is satisfied
        \item[ii.] $\mathcal{B}$ includes \textbf{all} subsets of $X$ of \textbf{up to 3} elements 
    \end{enumerate}
    then there exists a rational preference relation $\succsim$ s.t. $C(B)=C^*(B,\succsim),\forall B\in\mathcal{B}$. And this rational $\succsim$ is the \textbf{only} preference relation that can rationalize
     $(\mathcal{B},C(\cdot))$\footnote{The existence of a rationalizing preference relation $\succsim$ brings many interesting properties, one of them is \textit{path-invariance}: $\forall B_1,B_2\in\mathcal{B}, B_1\cup B_2 \in\mathcal{B}\land C(B_1)\cup C(B_2)\in\mathcal{B}\Rightarrow C(B_1\cup B_2)=C(C(B_1)\cup C(B_2))$, meaning that the decision problem can safely be subdivided. 
     A proof is: for $x\in C(B_1\cup B_2)$ and $y\in C(B_1)\cup C(B_2)$, since $C(B_1)\cup C(B_2) \subset B_1\cup B_2$, thus $x\in C(B_1\cup B_2)\Rightarrow x\in C(C(B_1)\cup C(B_2))$; for $x\in C(C(B_1)\cup C(B_2))$ and $y\in B_1\cup B_2$, we have $x\succsim z,\forall z\in C(B_1),C(B_2)\Rightarrow x\succsim w,\forall w\in B_1\cup B_2\Rightarrow x\in C(B_1\cup B_2)$}.
\end{theorem}

Now let's prove it, by examing the natural candidate for a rationalizing preference relation: the \textbf{revealed preference relation $\succsim^*$}:
\begin{enumerate}
    \item[\textbf{Step 1}] Prove that $\succsim^*$ is rational
    \begin{enumerate}
        \item[-] Completeness: By (ii) of Def.\ref{def_rationalize_choice}, all binary subsets of $X$ are in $\mathcal{B}$. Hence, $\{x,y\}\in\mathcal{B}$. For this binary menu, $C(\{x,y\})$ must contain either $x$ or $y$, therefore, $x\succsim^*y$ or $y\succsim^* x$ or both. Completeness proved.
        \item[-] Transitivity: $\forall\{x,y,z\}\in \mathcal{B}$, $C(\{x,y,z\})\neq \varnothing$. Suppose $x\succsim^*y,y\succsim^*z$, which implies that $x\in C(\{x,y\}),y\in C(\{y,z\})$, we then have three cases for $C(\{x,y,z\})$:
        \begin{enumerate}
            \item[a.] $x\in C(\{x,y,z\})$, WARP gives that $x\in C(\{x,z\})\Rightarrow x\succsim^*z$
            \item[b.] $y\in C(\{x,y,z\})$, we have $x\in C(\{x,y\})$. WARP gives $x\in C(\{x,y,z\})$ $\Rightarrow x\succsim^* z$
            \item[c.] $z\in C(\{x,y,z\})$, we have $y\in C(\{y,z\})$. WARP gives $y\in C(\{x,y,z\})$, and $x\in C(\{x,y\})$, WARP gives $x\in C(\{x,y,z\})\Rightarrow x\succsim^*z$
        \end{enumerate} 
        Hence, $x\succsim^*y,y\succsim^*z\Rightarrow x\succsim^* z$
    \end{enumerate} 
    \item[\textbf{Step 2}] Prove that $\succsim^*$ rationalizes $C(\cdot)$ on $\mathcal{B}$
    
    Now, we need to show $\forall B\in\mathcal{B}, C(B)=C^*(B,\succsim^*)$. Logically, this means the revealed preference $\succsim^*$ inferred from $C(\cdot)$ actually generates $C(\cdot)$. Formally, we prove it in 2 steps:
    \begin{enumerate}
        \item[a.] Suppose $x\in C(B)$, which means that $\forall y\in B, x\succsim^* y$ (by Def.\ref{def_revealed_pref}), hence $x\in C^*(B,\succsim^*)$ (by Def.\ref{def_induced_choice}). This proves $C(B)\subseteq C^*(B,\succsim^*)$
        \item[b.] Suppose $x\in C^*(B,\succsim^*)$, which means that $\forall y\in B, x\succsim^* y$ (by Def.\ref{def_induced_choice}). Therefore, $\forall y\in B$, there must exist a set $B_y\in\mathcal{B}$ s.t.
         $x,y\in B_y\Rightarrow x\in C(B_y)$. Since $C(B)\neq \varnothing$, suppose $z\in C(B)$, since $x\in C(B_z)$, WARP implies that $x\in C(B)$. This proves $C^*(B,\succsim^*)\subseteq C(B)$
    \end{enumerate}
    Together, we have $C(B)=C^*(B,\succsim^*)$.
    \item[\textbf{Step 3}] Prove $\succsim^*$ is the unique choice
    
    Since $\mathcal{B}$ includes all two-element subsets of $X$, the choice behavior in $C(\cdot)$ completely determines the pairwise preference relations over $X$ of any rationalizing preference.
\end{enumerate}

Now, it is \textbf{proved}! Notice that the main assumption(restriction) here is \textbf{$\mathcal{B}$ includes all subsets of $X$ of up to 3 elements}, this gives completeness, which is fundamental.

\subsection*{Things to keep in mind}
We have proved the twoway links of preferences and choices:
\begin{enumerate}
    \item[-] Rational $\succsim\Rightarrow (\mathcal{B},C^*(\cdot,\succsim))$ satisfies WARP (see Thm.\ref{thm_rational_leadto_WARP})
    \item[-] A WARP-satisfying, up-to-3-element $(\mathcal{B},C(\cdot))$ can be uniquely rationalized by a rational $\succsim$ (see Thm.\ref{theorem_rationalizing_exist})
\end{enumerate}
However, there are still something to keep in mind.

First, for a given choice structure $(\mathcal{B},C(\cdot))$, there may be \textbf{more than one} rationalizing preference relation $\succsim$ in general. Here is the simplest example:
For $X=\{x,y\},\mathcal{B}\{\{x\},\{y\}\}$ and the choice structure $C(\{x\})=\{x\}, C(\{y\}=\{y\})$. In this case, \textbf{ANY} relation preference relation of $X$ can rationalize $C(\cdot)$
This is related to both Def.\ref{def_rationalize_choice} and (ii) of Thm.\ref{theorem_rationalizing_exist}. Thm.\ref{theorem_rationalizing_exist} gives that if $\mathcal{B}$ contains \textbf{ALL binary} menus of $X$,
then there could be at most one rationalizing preference relation.

Second, the restriction for WARP$\Rightarrow$ rational $\succsim$, namely $\mathcal{B}$ containing all subsets of up to 3 elements, is too strong. For many economic problems, we will not consider all possible subsets, or limit ourselves to up-to-3-element ones. A strengthened version of WARP will be introduced later for that purpose.

Finally, up till now, we define a rationalizing preference as one: $C(B)=C^*(B,\succsim)$ (Def.\ref{def_rationalize_choice}). A common alternative would be to require only $C(B)\subset C^*(B,\succsim)$: if $C(B)$ is a \textbf{subset} of the most preferred choices generated by $\succsim$, i.e., $C^*(B,\succsim)$. This will allow indifferences
to be more than the situation of anything might be picked. And it is empirically intuitive in a sense that observed choices will never fully reveal decision makers' entire preferencing maximizing choice set. Naturally, $C(B)\subset C^*(B,\succsim)$ is weaker than $C(B)=C^*(B,\succsim)$. But $C(B)\subset C^*(B,\succsim)$ has an interesting property: the all-indifferent preference
will be able to rationalize \textit{any} choice behavior. Therefore, when $C(B)\subset C^*(B,\succsim)$ is used, you would always need to put some additional restrictions on the rationalizing preference relation for the specific economic context.