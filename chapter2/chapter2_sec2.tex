\subsection{Walrasian Budgets}
We have already defined the economic-affordability constraint of consumers, if we also limit consumption bundle $x$ to be non-negative, we would have the Walrasian, or competitive budget:

\begin{definition}
    The Walrasian, or competitive budget set $$B_{\mathbf{p},w}=\{x\in\mathbb{R}^L_+:\mathbf{p}\cdot\mathbf{x}\leq w\}$$ is the set of all feasible consumption bundles give market prices $\mathbf{p}$ and wealth $w$.
\end{definition}

From a Walrasian budget's point of view, a consumer can only choose a consumption bundle $x$ from $B_{\mathbf{p},w}$. An underlining assumption here is $w>0$, otherwise consumers cannot afford anything. We can also
separately define the "edge" of a Walrasian budget set as:
\begin{definition}
    The \textit{budget hyperplane} is the set $\{x\in\mathbb{R}^L_+:\mathbf{p}\cdot\mathbf{x}=w\}$
\end{definition}
It determines the upper bound of the budget set: with prices of other commodities ($\mathbf{p}_{-i}$) and wealth level $w$ fixed, the change of commodity $i$'s price $p_i$ will enlarge/shrink the budget set by moving the budget hyperplane.
Geometrically, the price vector $\mathbf{p}$ must be orthogonal to the budget hyperplane, we can think it this way: for any two bundles $\mathbf{x}$ and $\mathbf{x}'$ one the budget hyperplane, we must have $\mathbf{p}\cdot\mathbf{x}=\mathbf{p}\cdot\mathbf{x}'=w$, hence
$\mathbf{p}\cdot\Delta\mathbf{x}=\mathbf{p}\cdot(\mathbf{x}'-\mathbf{x})=0$ is always true.

A core feature of the Walrasian budget set is that it is \textbf{convex}: $\forall \mathbf{x},\mathbf{y}\in B_{\mathbf{p},w}, \alpha\in[0,1], \alpha\mathbf{x}+(1-\alpha)\mathbf{y}\in B_{\mathbf{p},w}$. This is very easy to prove: $\mathbf{x}\in\mathbb{R}^L_+\land\mathbf{y}\in\mathbb{R}^L_+\Rightarrow \alpha\mathbf{x}+(1-\alpha)\mathbf{y}\in \mathbb{R}^L_+$, $\mathbf{p}\cdot\mathbf{x}\leq w\land\mathbf{p}\cdot \mathbf{y}\leq w\Rightarrow \alpha(\mathbf{p}\cdot\mathbf{x})+(1-\alpha)(\mathbf{p}\cdot\mathbf{y})\leq w$.
Notice that the Walrasian budget set is not automatically convex. Its convexity is induced from the convexity of its superset (the consumption set), in this case $\mathbb{R}^L_+$. In general, it is easy to show that the Walrasian budget set will convex as long as its corresponding consumption set is convex.

Of course, it is perfectly possible that a consumer's budget is NOT convex (and not Walrasian, in that sense), the brilliant work of \citet{deaton1980economics} has documented and discussed many complicated consumption sets that are not convex.

\subsection{Walrasian Demand Function}
With Walrasian budgets defined, we can define \textit{Walrasian demand correspondence} and \textit{Walrasian demand function} as:
\begin{definition}
    For each \textit{price-wealth} pair $(\mathbf{p},w)$, Walrasian demand correspondence is the set of chosen consumption bundles, written as $\mathbf{x}(\mathbf{p},w)$. When $\mathbf{x}(\mathbf{p},w)$ is single-valued, it will be referred to as a \textbf{Walrasian demand function}.
\end{definition}

The two main assumptions of $\mathbf{x}(\mathbf{p},w)$ are:
\begin{definition}
    For a Walrasian demand correspondence $\mathbf{x}(\mathbf{p},w)$, we assume it is:
    \begin{enumerate}
        \item[1.] \textbf{Homogeneous of degree zero}: $\forall \mathbf{p},w$ and $\alpha >0$, $\mathbf{x}(\alpha \mathbf{p},\alpha w)=\mathbf{x}(\mathbf{p},w)$. This means that if wealth and prices change in the same proportion at the same time, consumer would not change her choice. 
        
        There are two implications of homogeneous of degree zero assumption:
        \begin{enumerate}
            \item[-] \textbf{Dimension reduction}: With this assumption, we can reduce $\mathbf{x}(\mathbf{p},w)$ to $\mathbf{x}(\tilde{\mathbf{p}},1)$ where $\tilde{\mathbf{p}}=\frac{1}{w}\mathbf{p}$, hence to a $L$-argument problem.
            \item[-] \textbf{Choice structure}: By homogeneity of degree zero, $\mathbf{x}(\mathbf{p},w)$ depends only on $\mathbf{p}$ and $w$, i.e. the budget set, then for the family of Walrasian budget sets $\mathcal{B}^*=\{B_{\mathbf{p},w}:\mathbf{p}\gg 0,w>0\}$, $(\mathcal{B}^*,\mathbf{x}(\cdot))$ is a choice structure. This choice structure does NOT include all possible subsets of $X$\sidenotes{$\leftarrow X$ is the set of all possible bundles}, in particular, not all two- and three-element subsets of $X$\footnote{This relates to the argument that when one consumption bundle $\mathbf{x^*}$ is infeasible, it not being chosen does NOT mean it is less preferred. This will be dealt with more carefully with more assumptions of preference-based demand.}, therefore, requires more assumptions to have a rationalizing preference.
        \end{enumerate}
             
        \item[2.] \textbf{Walras' law}: $\forall \gg 0,w>0$, $\mathbf{p}\cdot\mathbf{x}=w$ for every $\mathbf{x}\in \mathbf{x}(\mathbf{p},w)$. Walras' law means that a consumer want to spend all her wealth for consumption, every consumption bundle hence will exhaust $w$. 
        
        Notice that this is implicitly intertemporal, meaning that Walras' law consider lifetime resource allocation.
    \end{enumerate}
\end{definition}

Next, we disucess several basic definitions induced from the Walrasian demand function. For a demand function 
$$\mathbf{x}(\mathbf{p},w)=\left[x_1 (\mathbf{p},w),x_2 (\mathbf{p},w),\cdots, x_L(\mathbf{p},w) \right]^T$$ we have the following two effects:

\begin{description}
    \item[Wealth effects] \underline{Fix $\mathbf{p}$, get a function of $x(w)$}.
    
    Take the partial derivative of demand function on wealth: $$D_w x(\mathbf{x},w)=\left[\frac{\partial x_1(\mathbf{p},w)}{\partial w}, \frac{\partial x_2(\mathbf{p},w)}{\partial w},\cdots, \frac{\partial x_L(\mathbf{p},w)}{\partial w} \right]^T$$, then $\frac{\partial x_l(\mathbf{p},w)}{\partial w}$ is the \textit{wealth effect} for the $l$th commodity.
    Wealth effects can classify commodities into two types:
    \begin{enumerate}
        \item[-] \textbf{normal}: $\partial x_l(\mathbf{p},w)/\partial w\geq 0$
        \item[-] \textbf{inferior}: $\partial x_l(\mathbf{p},w)/\partial w <0$
    \end{enumerate} 
    \item[Price effects] \underline{For commodity $l$, fix $\mathbf{p}_{-l}$ and $w$, get a function of $x(p_l)$}.
    
    Take the partial derivative of demand function on price vector:
    $$D_{\mathbf{p}}x(\mathbf{p},w)= \begin{bmatrix}
        \nabla_{\mathbf{p}}x_1(\mathbf{p},w)\\
        \vdots\\
        \nabla_{\mathbf{p}}x_L(\mathbf{p},w) \end{bmatrix} 
    =
    \begin{bmatrix}
        \frac{\partial x_1(\mathbf{p},w)}{\partial p_1} & \cdots & \frac{\partial x_1(\mathbf{p},w)}{\partial p_L}\\
        \vdots & \ddots & \vdots\\
        \frac{\partial x_L(\mathbf{p},w)}{\partial p_1} & \cdots &\frac{\partial x_L(\mathbf{p},w)}{\partial p_L}
        \end{bmatrix}$$
\end{description}

For most goods, the price effects would be negative: you would buy more if the price is lower. However, there \textit{Giffen} goods (often low quality) and \textit{Veblen} goods (often luxurious) that have positive price effects.

Regarding wealth effects $\partial x_l(\mathbf{p},w)/partial w$ and price effects $\partial x_l(\mathbf{p},w)/\partial p_k$, we have the following two theorems:

\begin{theorem}\label{thm_homo_waldemand_thm1}
    If the Walrasian demand function $\mathbf{x}(\mathbf{p},w)$ is \textbf{homogeneous of degree zero}, the $\forall \mathbf{p},w$:
    $$\sum^L_{k=1}\frac{\partial x_l(\mathbf{p},w)}{\partial p_k}p_k +\frac{\partial x_l(\mathbf{p},w)}{\partial w}w=0,\forall l=1,\cdots,L$$
\end{theorem}

This is easy to proof: homogeneity of degree zero gives $\mathbf{x}(\alpha \mathbf{p},\alpha w)-\mathbf{x}(\mathbf{p},w)=0$, differentiating with respect to $\alpha$, get:
$$D_{\alpha \mathbf{p}}\mathbf{x}(\alpha \mathbf{p},\alpha w)\cdot \mathbf{p} + D_{\alpha w} \mathbf{x}(\alpha \mathbf{p},\alpha w)w=0$$
this is true for any $\alpha$, if we take $\alpha=1$, we get $D_{\mathbf{p}}\mathbf{x}(\mathbf{p}, w)\cdot \mathbf{p} + D_{ w} \mathbf{x}( \mathbf{p}, w)w=\mathbf{0}$, which is just the matrix notation of Thm.\ref{thm_homo_waldemand_thm1}.

Intuitively, this implies the price (substitution) effects and wealth (income) effects induced by the price change of one commodity, when weighted by the prices of other commodities and wealth, will cancel out.

Another theorem is induced from Walras' law:
\begin{theorem}
    If the Walrasian emand function $\mathbf{x}(\mathbf{p},w)$ satisfies \textbf{Walras' law}, then for all $\mathbf{p},w$:
    $$\sum^L_{l=1}p_l\frac{\partial x_l(\mathbf{p},w)}{\partial p_k}+x_k(\mathbf{p},w)=0,\forall k=1,\cdots,L$$
    and
    $$\sum^L_{l=1}p_l\frac{\partial x_l(\mathbf{p},w)}{\partial w}=1$$
\end{theorem}

The proof is also easy: Walras' law gives $\mathbf{p}\cdot \mathbf{x}(\mathbf{p},w)=w$, take derivatives with respect to $\mathbf{p}$, get $\mathbf{p}\cdot D_{\mathbf{p}}\mathbf{x}(\mathbf{p},w)+\mathbf{x}(\mathbf{p},w)^T=\mathbf{0}^T$; take derivatives with repsect to $w$, 